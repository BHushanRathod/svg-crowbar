<!DOCTYPE html>
<head>
  <meta charset='utf-8'>
  <title>SVG Crowbar</title>
  <link rel="stylesheet" type="text/css" href="assets/linked.css">
  <style>

    /* Testing */
    @import url("assets/imported.css");

    svg {
    border: solid 1px #ddd;
    }

    .internal {
    fill: #f0f;
    font-size: 16px;
    font-family: Helvetica;
    }

    /* Page Styles */
    body {
      font-family: "Helvetica Neue", Helvetica, Arial;
      width: 600px;
      margin: 40px auto;
      font-size: 15px;
      line-height: 1.4em;
    }

    h3 {
      font-size: 18px;
      border-top: solid 1px #ddd;
      padding: 20px 0 0 0;
      margin: 20px 0 0 0;
    }

    p {
      color: #333;
    }

    .note {
      color: #999;
    }

    .bookmarklet {
      padding: 3px 8px;
      font-size: 12px;
      font-weight: bold;
      text-decoration: none;
      border-radius: 1em;
      background: #666;
      color: white;
    }

    #svgs {
      margin: 20px 0;
    }

  </style>
</head>

<body>
  <h1>SVG Crowbar</h1>
  <p>A bookmarklet that extracts SVG nodes and accompanying styles from an HTML document and downloads them as an SVG file—A file which you could open and edit in Adobe Illustrator, for instance. Because SVGs are resolution independent, it’s great for when you want to use web technologies to create documents that are meant to be printed (like, maybe on newsprint). It was created with <a href="http://d3js.org">d3.js</a> in mind, but it should work fine with any SVG.</p>

  <h3>The Bookmarklet</h3>
  <p>
    <a class="bookmarklet" href="javascript:javascript: (function () { var e = document.createElement('script'); e.setAttribute('src', 'http://nytimes.github.com/svg-crowbar/svg-crowbar.js'); document.body.appendChild(e);
   })();">SVG Crowbar</a>&nbsp;
    <span>← Drag this to your bookmarks bar.</span>
  </p>
  <p>After you’ve installed the bookmarklet, you can execute it on any page with an SVG node.</p>
  <p class="note">(You can click on the link to test it on this page without installing anything.)</p>
  <a href="https://github.com/NYTimes/svg-crowbar"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub"></a>
  <h3>Notes</h3>
  <p>Pixels will map to points when opening in Illustrator.</p>
  <p>Size of the document will be the size of your SVG node.</p>
  <p>All colors are RGB, which is not ideal for print documents, but CMYK is not supported in SVG 1.1.</p>
  <h3>Gotchas</h3>
  <p>It only works in Chrome.</p>
  <p>Doesn’t work with iframes.</p>
  <p>Descendent ">" CSS selectors will crash Illustrator, therefore those styles are stripped out. Be warned.</p>
  <p>Some styles won’t propogate down if they depend on markup outside of the svg element. For instance, if you target a svg path element by an id on the div surrounding the svg ("#map svg path") then those styles won’t show up in the resulting file. </p>

  <h3>Some Test SVGs</h3>
  <div id="svgs"></div>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script type="text/javascript">

   var svg = d3.select("#svgs").append("svg")
       .attr("class", "first")
       .attr("width", 600)
       .attr("height", 400);

   svg.append("circle")
       .attr("r", 50)
       .style("fill", "#00f");

   svg.append("text")
       .attr("class", "internal")
       .attr("x", 100)
       .attr("y", 100)
       .text("Internal CSS, this text should be pink.");

   svg.append("text")
       .attr("class", "imported")
       .attr("x", 100)
       .attr("y", 200)
       .text("Imported CSS, this text should be pink.");

   svg.append("text")
       .attr("class", "linked")
       .attr("x", 100)
       .attr("y", 300)
       .text("Linked CSS, this text should be pink.");

   var secondSvg = d3.select("#svgs").append("svg")
       .attr("class", "second")
       .attr("width", 600)
       .attr("height", 400);

   secondSvg.append("circle")
       .attr("r", 20);

   // SVGCrowbar.init("second", "svg.second");

  </script>

</body>